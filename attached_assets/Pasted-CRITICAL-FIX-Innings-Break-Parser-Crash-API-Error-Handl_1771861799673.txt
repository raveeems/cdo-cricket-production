CRITICAL FIX: Innings Break Parser Crash & API Error Handling

Context: The sync engine and live scorecard completely died the exact moment the 1st inning finished (at exactly 20.0 overs). The sync has been dead for 18 minutes.

Root Cause Analysis:

Innings Break Payload Shift: During the innings break, the CricAPI payload structure changes (e.g., active batters/bowlers become null or are removed). The parser in fetchLiveScorecard and the heartbeat is throwing a fatal TypeError when trying to read these missing properties, crashing the entire sync loop.

API Rate Limit Rejection: Polling at 15s may have triggered a 429/Quota limit from CricAPI. The app is likely trying to parse an API error JSON as a cricket scorecard and crashing.

Stale Check Flaw: If the API resets totalOvers for the second inning, the stale check might be falsely rejecting Inning 2 (0.0 overs) because it thinks it's older than Inning 1 (20.0 overs).

Action Required IMMEDIATELY:

1. Bulletproof the Parser (Optional Chaining):

Go through fetchLiveScorecard, the heartbeat parser, and the frontend Scorecard component. Apply optional chaining (?.) and nullish coalescing (??) to EVERY deeply nested property (batters, bowlers, current over, striker, non-striker).

The app MUST NOT crash if batter or bowler arrays are empty or missing. It must gracefully render empty states during an innings break.

2. Intercept API Errors:

Before parsing the scorecard, verify the API response is actually successful (e.g., check for data.apikey errors, status !== 'success', or HTTP 429).

If the API returns a quota error or failure, safely abort the sync, log the specific API error message to the console, and return a safe fallback to the frontend so it doesn't crash to a blank screen.

3. Fix the totalOvers Stale Check for Innings Breaks:

Ensure the totalOvers calculation explicitly sums the overs across ALL innings in the array. (e.g., Inning 1: 20.0 + Inning 2: 0.1 = 20.1). If it only checks the current active inning, it will falsely reject the start of the 2nd inning.

4. Clear the Loop:

Ensure the heartbeat lock resets even if a parsing error occurs.